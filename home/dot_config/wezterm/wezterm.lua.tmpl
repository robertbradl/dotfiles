local wezterm = require("wezterm")
return {
	adjust_window_size_when_changing_font_size = false,
	color_scheme = "Gruvbox dark, hard (base16)",
	enable_tab_bar = false,
  {{- if eq .chezmoi.hostname "iMac" }}
    font_size = 18.0,
  {{- else }}
	font_size = 14.0,
  {{- end }}
	initial_rows = 40,
	initial_cols = 150,
	font = wezterm.font("JetBrainsMono Nerd Font Mono"),
	audible_bell = "Disabled",
	macos_window_background_blur = 30,

	window_background_opacity = 0.85,
	window_decorations = "RESIZE",
	keys = {
		{
			key = "q",
			mods = "CTRL",
			action = wezterm.action.ToggleFullScreen,
		},
	},
	mouse_bindings = {
		-- Ctrl-click will open the link under the mouse cursor
		{
			event = { Up = { streak = 1, button = "Left" } },
			mods = "CTRL",
			action = wezterm.action.OpenLinkAtMouseCursor,
		},
	},
  {{- if eq .chezmoi.hostname "iMac" }}
	  wezterm.on("gui-startup", function(cmd)
	  	local screen = wezterm.gui.screens().by_name["DELL S2725DS"]
	  	local ratio = 0.9
	  	local width, height = screen.width * ratio, screen.height * ratio
	  	local tab, pane, window = wezterm.mux.spawn_window(cmd or {
	  		position = { x = (screen.width - width) / 2, y = (screen.height - height) / 2 },
	  	})
	  	-- window:gui_window():maximize()
	  	window:gui_window():set_inner_size(width, height)
	  end),
  {{- else }}
	  wezterm.on("gui-startup", function(cmd)
	  	local screen = wezterm.gui.screens().main
	  	local ratio = 0.9
	  	local menu_bar_offset = 34 -- Adjust as needed
	  	local width, height = screen.width * ratio, screen.height * ratio
	  	local tab, pane, window = wezterm.mux.spawn_window(cmd or {
	  		position = { x = (screen.width - width) / 2, y = (screen.height - height) / 2 + menu_bar_offset },
	  	})
	  	-- window:gui_window():maximize()
	  	window:gui_window():set_inner_size(width, height)
	  end),
  {{- end }}
}
